require 'rails_helper'

describe "ParseTopics" do

  it "saves a single topic when add_newest_topics is called with '1'" do

#     canned_answer = <<-END_OF_STRING
#     {"tid":33423,"uid":10135,"cid":12,"mainPid":33421,"title":"[Solved] Custom QQuickPaintedItem apear blurry after instantiate more than once","slug":"33423/solved-custom-qquickpainteditem-apear-blurry-after-instantiate-more-than-once","timestamp":1382534060000,"lastposttime":1383310159000,"postcount":4,"viewcount":559,"locked":false,"deleted":false,"pinned":false,"teaserPid":"200530","relativeTime":"2013-10-23T13:14:20.000Z","lastposttimeISO":"2013-11-01T12:49:19.000Z","posts":[{"pid":33421,"uid":10135,"tid":33423,"content":"<p>It is strange. I have created one QQuickPaintedItem based Qt Quick item for my application.  If I have only one instance of it on visible area of Qt Quick Window it render as it should, but if I added one or more of it instances to the same window, Only the first Item appear sharp and clear. The second and other instances appear blurry as in attached image. Any Idea why this happening?</p>\n<p>!<a href=\"https://dl.dropboxusercontent.com/u/2395030/Custom-QQuickPaintedItem.png\" rel=\"nofollow\">https://dl.dropboxusercontent.com/u/2395030/Custom-QQuickPaintedItem.png</a>(Custom QQuickPaintedItem)!<br />\n<em>(open image in a separate tab to see the image clearly)</em></p>\n<p><em>It is hard to duplicate. Before I try write sample code to recreate  this issue  I thought it would be good Idea to ask it here.</em></p>\n","timestamp":1382534060000,"reputation":0,"votes":0,"editor":null,"edited":0,"deleted":false,"relativeTime":"2013-10-23T13:14:20.000Z","relativeEditTime":"","index":0,"user":{"username":"dasun","userslug":"dasun","email":"s.dasun@gmail.com","picture":"https://www.gravatar.com/avatar/b895e7124cddb80844f0fad42b44c0bf?size=192&d=mm","fullname":"","signature":"","reputation":19,"postcount":121,"banned":false,"status":"offline","uid":10135,"lastonline":null,"icon:text":"D","icon:bgColor":"#1b5e20","groups":[],"custom_profile_info":[]},"favourited":false,"upvoted":false,"downvoted":false,"selfPost":false,"display_moderator_tools":false,"display_move_tools":false},{"pid":200314,"uid":725,"tid":33423,"content":"<p>Are you sure that all of your items are aligned to the pixel grid? You might want to debug the x and y coordinates to make sure they are not located at floating point coordinates. You can also experiment with setting the smooth property to false on the items.</p>\n","timestamp":1382615835000,"reputation":0,"votes":0,"editor":null,"edited":0,"deleted":false,"relativeTime":"2013-10-24T11:57:15.000Z","relativeEditTime":"","index":1,"user":{"username":"Jens","userslug":"jens","email":"jensbw@gmail.com","picture":"https://www.gravatar.com/avatar/e66b3db2b1193a745368a9c8140eb967?size=192&d=mm","fullname":"","signature":"","reputation":33,"postcount":379,"banned":false,"status":"offline","uid":725,"lastonline":null,"icon:text":"J","icon:bgColor":"#33691e","groups":[],"custom_profile_info":[]},"favourited":false,"upvoted":false,"downvoted":false,"selfPost":false,"display_moderator_tools":false,"display_move_tools":false},{"pid":200315,"uid":10135,"tid":33423,"content":"<p>That's a catch. I use floating point using QRectF positions with scaling. I'll check and update you. Thank you a lot!</p>\n","timestamp":1382616955000,"reputation":0,"votes":0,"editor":null,"edited":0,"deleted":false,"relativeTime":"2013-10-24T12:15:55.000Z","relativeEditTime":"","index":2,"user":{"username":"dasun","userslug":"dasun","email":"s.dasun@gmail.com","picture":"https://www.gravatar.com/avatar/b895e7124cddb80844f0fad42b44c0bf?size=192&d=mm","fullname":"","signature":"","reputation":19,"postcount":121,"banned":false,"status":"offline","uid":10135,"lastonline":null,"icon:text":"D","icon:bgColor":"#1b5e20","groups":[],"custom_profile_info":[]},"favourited":false,"upvoted":false,"downvoted":false,"selfPost":false,"display_moderator_tools":false,"display_move_tools":false},{"pid":200530,"uid":10135,"tid":33423,"content":"<p>Changing floating point positions to nearest integer worked! Thank you again.</p>\n","timestamp":1383310159000,"reputation":0,"votes":0,"editor":null,"edited":0,"deleted":false,"relativeTime":"2013-11-01T12:49:19.000Z","relativeEditTime":"","index":3,"user":{"username":"dasun","userslug":"dasun","email":"s.dasun@gmail.com","picture":"https://www.gravatar.com/avatar/b895e7124cddb80844f0fad42b44c0bf?size=192&d=mm","fullname":"","signature":"","reputation":19,"postcount":121,"banned":false,"status":"offline","uid":10135,"lastonline":null,"icon:text":"D","icon:bgColor":"#1b5e20","groups":[],"custom_profile_info":[]},"favourited":false,"upvoted":false,"downvoted":false,"selfPost":false,"display_moderator_tools":false,"display_move_tools":false}],"category":{"cid":12,"name":"Qt Quick","description":"Looking for The Bling Thing(tm)? Post here!","icon":"fa-paper-plane","bgColor":"#80c342","color":"#FFFFFF","slug":"12/qt-quick","parentCid":"4","topic_count":7450,"post_count":32438,"disabled":false,"order":4,"link":"","numRecentReplies":1,"class":"col-md-4 col-xs-12","imageClass":"auto","totalPostCount":32438,"totalTopicCount":7450,"descriptionParsed":"Looking for The Bling Thing(tm)? Post here!"},"thread_tools":[{"class":"toggleQuestionStatus alert-warning","title":"Ask as question","icon":"fa-question-circle"}],"tags":[],"isFollowing":false,"bookmark":null,"unreplied":false,"related":[],"breadcrumbs":[{"text":"[[global:home]]","url":"/"},{"text":"Qt Development","url":"/category/4/qt-development"},{"text":"Qt Quick","url":"/category/12/qt-quick"},{"text":"[Solved] Custom QQuickPaintedItem apear blurry after instantiate more than once"}],"privileges":{"topics:reply":false,"read":true,"view_thread_tools":false,"editable":false,"deletable":false,"view_deleted":false,"isAdminOrMod":false,"disabled":false,"tid":"33423","uid":0},"reputation:disabled":false,"downvote:disabled":false,"feeds:disableRSS":false,"rssFeedUrl":"/topic/33423.rss","pagination":{"prev":{"page":1,"active":false},"next":{"page":1,"active":false},"rel":[],"pages":[],"currentPage":1,"pageCount":1},"loggedIn":false,"relative_path":"","template":{"name":"topic","topic":true},"bodyClass":"page-topic page-topic-33423 page-topic-solved-custom-qquickpainteditem-apear-blurry-after-instantiate-more-than-once"}
#     END_OF_STRING
#
#     stub_request(:get, /.*/).to_return(body: canned_answer, headers: { 'content-type' => 'application/json' })
#
#   #  topic = ParseTopics.add_newest_topics(1)
# puts HTTParty.get("http://forum.qt.io/api/topic/33434/textlabel")
#     byebug

  end


end
