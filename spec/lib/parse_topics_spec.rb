require 'rails_helper'

describe "ParseTopics" do

  topic_array = [{"tid"=>67543, "uid"=>27912, "cid"=>10, "mainPid"=>329857, "title"=>"Access lists from qml in c++", "slug"=>"67543/access-lists-from-qml-in-c", "timestamp"=>1464271894789, "lastposttime"=>1464271894805, "postcount"=>1, "viewcount"=>8, "locked"=>false, "deleted"=>false, "pinned"=>false, "isQuestion"=>1, "isSolved"=>0, "relativeTime"=>"2016-05-26T14:11:34.789Z", "lastposttimeISO"=>"2016-05-26T14:11:34.805Z", "posts"=>[{"pid"=>329857, "uid"=>27912, "tid"=>67543, "content"=>"<p>I have a list which are in a qml widget and the widget is called in the mainwindow.<br />\nMainwindow snippet:</p>\n<pre><code>QQuickWidget *widget = new QQuickWidget;\nwidget-&gt;setSource(QUrl(QStringLiteral(&quot;qrc:/qml_maps/Viewer.qml&quot;)));\n</code></pre>\n<p>The lists can be accessed in Viewer.qml. How do I access it in a different c++ class.</p>\n<p>Thanks!!</p>\n", "timestamp"=>1464271894805, "reputation"=>0, "votes"=>0, "editor"=>nil, "edited"=>0, "deleted"=>false, "relativeTime"=>"2016-05-26T14:11:34.805Z", "relativeEditTime"=>"", "index"=>0, "user"=>{"username"=>"saitej", "userslug"=>"saitej", "email"=>"sensored@gmail.com", "picture"=>"https://www.gravatar.com/avatar/957d0c06cfcdc1aadfb1e52ba3448800?size=192&d=mm", "fullname"=>"", "signature"=>"", "reputation"=>1, "postcount"=>45, "banned"=>false, "status"=>"offline", "uid"=>27912, "lastonline"=>1464272235947, "icon:text"=>"S", "icon:bgColor"=>"#e65100", "groups"=>[], "custom_profile_info"=>[]}, "favourited"=>false, "upvoted"=>false, "downvoted"=>false, "selfPost"=>false, "display_moderator_tools"=>false, "display_move_tools"=>false}], "category"=>{"cid"=>10, "name"=>"General and Desktop", "description"=>"This is where all the desktop OS and general Qt questions belong.", "icon"=>"fa-laptop", "bgColor"=>"#80c342", "color"=>"#FFFFFF", "slug"=>"10/general-and-desktop", "parentCid"=>"4", "topic_count"=>34097, "post_count"=>173738, "disabled"=>false, "order"=>2, "link"=>"", "numRecentReplies"=>1, "class"=>"col-md-4 col-xs-12", "imageClass"=>"auto", "totalPostCount"=>173738, "totalTopicCount"=>34097, "descriptionParsed"=>"This is where all the desktop OS and general Qt questions belong."}, "thread_tools"=>[{"class"=>"toggleSolved alert-success topic-unsolved", "title"=>"Mark as Solved", "icon"=>"fa-check-circle"}, {"class"=>"toggleQuestionStatus", "title"=>"Make this a normal topic", "icon"=>"fa-comments"}], "tags"=>[], "isFollowing"=>false, "bookmark"=>nil, "unreplied"=>true, "related"=>[], "breadcrumbs"=>[{"text"=>"[[global:home]]", "url"=>"/"}, {"text"=>"Qt Development", "url"=>"/category/4/qt-development"}, {"text"=>"General and Desktop", "url"=>"/category/10/general-and-desktop"}, {"text"=>"Access lists from qml in c++"}], "privileges"=>{"topics:reply"=>false, "read"=>true, "view_thread_tools"=>false, "editable"=>false, "deletable"=>false, "view_deleted"=>false, "isAdminOrMod"=>false, "disabled"=>false, "tid"=>"67543", "uid"=>0}, "reputation:disabled"=>false, "downvote:disabled"=>false, "feeds:disableRSS"=>false, "rssFeedUrl"=>"/topic/67543.rss", "pagination"=>{"prev"=>{"page"=>1, "active"=>false}, "next"=>{"page"=>1, "active"=>false}, "rel"=>[], "pages"=>[], "currentPage"=>1, "pageCount"=>1}, "loggedIn"=>false, "relative_path"=>"", "template"=>{"name"=>"topic", "topic"=>true}, "bodyClass"=>"page-topic page-topic-67543 page-topic-access-lists-from-qml-in-c"}, {"tid"=>67542, "uid"=>21518, "cid"=>10, "mainPid"=>329855, "title"=>"Drag tabs between QTabWidgets", "slug"=>"67542/drag-tabs-between-qtabwidgets", "timestamp"=>1464271715033, "lastposttime"=>1464273550130, "postcount"=>2, "viewcount"=>5, "locked"=>false, "deleted"=>false, "pinned"=>false, "isQuestion"=>1, "isSolved"=>0, "teaserPid"=>"329859", "relativeTime"=>"2016-05-26T14:08:35.033Z", "lastposttimeISO"=>"2016-05-26T14:39:10.130Z", "posts"=>[{"pid"=>329855, "uid"=>21518, "tid"=>67542, "content"=>"<p>I have two <code>QTabWidget</code>s in a <code>QSplitter</code>. I'd like to be able to drag a tab from one <code>QTabWidget</code> to the other <code>QTabWidget</code>. Can anybody tell me how I can archive this?</p>\n<p>I saw this post: <a href=\"https://forum.qt.io/topic/38631/dragging-a-tab-from-qtabwidget-into-a-separate-window/5\">https://forum.qt.io/topic/38631/dragging-a-tab-from-qtabwidget-into-a-separate-window/5</a><br />\nHowever, my problem is that the <code>dragMoveEvent()</code> from my <code>QTabWidget</code> subclass never gets called. I moved one step further and subclassed <code>QTabBar</code> but I have the same problem there: <code>dragMoveEvent()</code> is never called.</p>\n<p>Any ideas? As far as I can tell there's no widget property that must be enabled to enable drags, that seems to only exist for drops.<br />\nIf there's a better way to archive what I want to archive I'm all ears. After all eventually I'd like to have a visible &quot;animation&quot; when the tab is being dragged around.</p>\n", "timestamp"=>1464271715064, "reputation"=>0, "votes"=>0, "editor"=>nil, "edited"=>0, "deleted"=>false, "relativeTime"=>"2016-05-26T14:08:35.064Z", "relativeEditTime"=>"", "index"=>0, "user"=>{"username"=>"Joel Bodenmann", "userslug"=>"joel-bodenmann", "email"=>"sensored@b-electronics.ch", "picture"=>"https://www.gravatar.com/avatar/64bb5c1dc3c27a3cb45e347326fbdec5?size=192&d=mm", "fullname"=>"", "signature"=>"<p>Embedded GUI library: http://ugfx.org</p>\n", "reputation"=>13, "postcount"=>154, "banned"=>false, "status"=>"offline", "uid"=>21518, "lastonline"=>1464272982088, "icon:text"=>"J", "icon:bgColor"=>"#e65100", "groups"=>[], "custom_profile_info"=>[]}, "favourited"=>false, "upvoted"=>false, "downvoted"=>false, "selfPost"=>false, "display_moderator_tools"=>false, "display_move_tools"=>false}, {"pid"=>329859, "uid"=>747, "tid"=>67542, "content"=>"<p>The post you linked to is in error. The drag move event takes place on the target widget, not when you want to start a drag from the source. So in that example code it should be <code>mouseMoveEvent</code>, not <code>dragMoveEvent</code>.</p>\n<p><a class=\"plugin-mentions-a\" href=\"https://forum.qt.io/user/joel-bodenmann\">@Joel-Bodenmann</a> said:</p>\n<blockquote>\n<p>As far as I can tell there's no widget property that must be enabled to enable drags</p>\n</blockquote>\n<p>There's no property but you must implement dragging yourself. See <a href=\"http://doc.qt.io/qt-5/dnd.html#dragging\" rel=\"nofollow\">the docs</a> for an example how to do it. That's for the source widget of the drag.</p>\n<p>The target has to have <a href=\"http://doc.qt.io/qt-5/qwidget.html#acceptDrops-prop\" rel=\"nofollow\">dropping enabled</a>. When something is dragged over it it will receive drag enter event. If that event is accepted the drag move events will follow when you move above the target and finally a drop event when you release the mouse button.</p>\n", "timestamp"=>1464273550130, "reputation"=>0, "votes"=>0, "editor"=>nil, "edited"=>0, "deleted"=>false, "relativeTime"=>"2016-05-26T14:39:10.130Z", "relativeEditTime"=>"", "index"=>1, "user"=>{"username"=>"Chris Kawa", "userslug"=>"chris-kawa", "email"=>"sensored@gmail.com", "picture"=>"https://www.gravatar.com/avatar/45bb97cd3a32d6468c962c9cd09ae59e?size=192&d=mm", "fullname"=>"Chris Kawa", "signature"=>"", "reputation"=>1003, "postcount"=>2771, "banned"=>false, "status"=>"online", "uid"=>747, "lastonline"=>1464273550204, "icon:text"=>"C", "icon:bgColor"=>"#e91e63", "groups"=>[{"name"=>"Moderators", "slug"=>"moderators", "labelColor"=>"#408500", "icon"=>"fa-check-square-o", "userTitle"=>"Moderators"}], "selectedGroup"=>{"name"=>"Moderators", "slug"=>"moderators", "labelColor"=>"#408500", "icon"=>"fa-check-square-o", "userTitle"=>"Moderators"}, "custom_profile_info"=>[]}, "favourited"=>false, "upvoted"=>false, "downvoted"=>false, "selfPost"=>false, "display_moderator_tools"=>false, "display_move_tools"=>false}], "category"=>{"cid"=>10, "name"=>"General and Desktop", "description"=>"This is where all the desktop OS and general Qt questions belong.", "icon"=>"fa-laptop", "bgColor"=>"#80c342", "color"=>"#FFFFFF", "slug"=>"10/general-and-desktop", "parentCid"=>"4", "topic_count"=>34097, "post_count"=>173738, "disabled"=>false, "order"=>2, "link"=>"", "numRecentReplies"=>1, "class"=>"col-md-4 col-xs-12", "imageClass"=>"auto", "totalPostCount"=>173738, "totalTopicCount"=>34097, "descriptionParsed"=>"This is where all the desktop OS and general Qt questions belong."}, "thread_tools"=>[{"class"=>"toggleSolved alert-success topic-unsolved", "title"=>"Mark as Solved", "icon"=>"fa-check-circle"}, {"class"=>"toggleQuestionStatus", "title"=>"Make this a normal topic", "icon"=>"fa-comments"}], "tags"=>[{"value"=>"qtabwidget", "color"=>"", "bgColor"=>"", "score"=>16}, {"value"=>"qtabbar", "color"=>"", "bgColor"=>"", "score"=>10}, {"value"=>"tab", "color"=>"", "bgColor"=>"", "score"=>2}, {"value"=>"drag", "color"=>"", "bgColor"=>"", "score"=>7}, {"value"=>"drag and drop", "color"=>"", "bgColor"=>"", "score"=>32}], "isFollowing"=>false, "bookmark"=>nil, "unreplied"=>false, "related"=>[{"tid"=>59450, "uid"=>22170, "cid"=>"10", "mainPid"=>292567, "title"=>"set QTabBar stylesheet as { qproperty-drawBase: 0; } not work sometime", "slug"=>"59450/set-qtabbar-stylesheet-as-qproperty-drawbase-0-not-work-sometime", "timestamp"=>1444106315148, "lastposttime"=>1455214821425, "postcount"=>2, "viewcount"=>184, "locked"=>false, "deleted"=>false, "pinned"=>false, "teaserPid"=>"312794", "relativeTime"=>"2015-10-06T04:38:35.148Z", "lastposttimeISO"=>"2016-02-11T18:20:21.425Z", "category"=>{"cid"=>10, "name"=>"General and Desktop", "icon"=>"fa-laptop", "bgColor"=>"#80c342", "color"=>"#FFFFFF", "slug"=>"10/general-and-desktop", "disabled"=>false}, "user"=>{"username"=>"shengfa.zhang", "userslug"=>"shengfa-zhang", "email"=>"sensored@outlook.com", "picture"=>"https://www.gravatar.com/avatar/a488579e45730982a53344a20512fd4e?size=192&d=mm", "fullname"=>"", "signature"=>"", "reputation"=>0, "postcount"=>2, "banned"=>0, "status"=>"online", "uid"=>22170, "icon:text"=>"S", "icon:bgColor"=>"#795548"}, "teaser"=>{"pid"=>312794, "uid"=>27128, "tid"=>59450, "content"=>"<p><a class=\"plugin-mentions-a\" href=\"https://forum.qt.io/user/shengfa-zhang\">@shengfa.zhang</a><br />\ntry to call on tabBar().adjustSize() each time, when drugging is over...<br />\nI had the same problem...</p>\n", "timestamp"=>"2016-02-11T18:20:21.425Z", "user"=>{"username"=>"Hr0n0s", "userslug"=>"hr0n0s", "email"=>"sensored@rub.de", "picture"=>"https://www.gravatar.com/avatar/b68441a76236bf9a545c786c019aa139?size=192&d=mm", "uid"=>27128, "icon:text"=>"H", "icon:bgColor"=>"#673ab7"}, "index"=>2}, "tags"=>[{"value"=>"stylesheet", "color"=>"", "bgColor"=>"", "score"=>61}, {"value"=>"style", "color"=>"", "bgColor"=>"", "score"=>14}, {"value"=>"qtabbar", "color"=>"", "bgColor"=>"", "score"=>10}, {"value"=>"qdockwidget", "color"=>"", "bgColor"=>"", "score"=>18}, {"value"=>"drawbase", "color"=>"", "bgColor"=>"", "score"=>1}], "isOwner"=>false, "unread"=>true, "unreplied"=>false}, {"tid"=>66012, "uid"=>19318, "cid"=>10, "mainPid"=>322068, "title"=>"<span class=\"answered\"><i class=\"fa fa-question-circle\"></i> Solved</span> Drag&amp;Drop using QFileSystemModel.", "slug"=>"66012/drag-drop-using-qfilesystemmodel", "timestamp"=>1460543344653, "lastposttime"=>1460545116043, "postcount"=>4, "viewcount"=>80, "locked"=>false, "deleted"=>false, "pinned"=>false, "isQuestion"=>1, "isSolved"=>1, "teaserPid"=>"322080", "relativeTime"=>"2016-04-13T10:29:04.653Z", "lastposttimeISO"=>"2016-04-13T10:58:36.043Z", "category"=>{"cid"=>10, "name"=>"General and Desktop", "icon"=>"fa-laptop", "bgColor"=>"#80c342", "color"=>"#FFFFFF", "slug"=>"10/general-and-desktop", "disabled"=>false}, "user"=>{"username"=>"tokafr", "userslug"=>"tokafr", "email"=>"sensored@gmail.com", "picture"=>"https://www.gravatar.com/avatar/d6842223d7ca187dae5f37deeed36804?size=192&d=mm", "fullname"=>"", "signature"=>"", "reputation"=>43, "postcount"=>83, "banned"=>0, "status"=>"online", "uid"=>19318, "icon:text"=>"T", "icon:bgColor"=>"#673ab7"}, "teaser"=>{"pid"=>322080, "uid"=>18260, "tid"=>66012, "content"=>"<p><a class=\"plugin-mentions-a\" href=\"https://forum.qt.io/user/tokafr\">@tokafr</a><br />\nSuper.<br />\nso it can copy files on its own ?<br />\nDoc hinted it, but I was not sure.</p>\n", "timestamp"=>"2016-04-13T10:58:36.043Z", "user"=>{"username"=>"mrjj", "userslug"=>"mrjj", "email"=>"sensored@pedax.com", "picture"=>"https://www.gravatar.com/avatar/bdb648df61ad37e4592e194063f4a784?size=192&d=mm", "uid"=>18260, "icon:text"=>"M", "icon:bgColor"=>"#e91e63"}, "index"=>4}, "tags"=>[{"value"=>"qfilesystemmode", "color"=>"", "bgColor"=>"", "score"=>8}, {"value"=>"qtableview", "color"=>"", "bgColor"=>"", "score"=>63}, {"value"=>"drag and drop", "color"=>"", "bgColor"=>"", "score"=>32}, {"value"=>"qabstractitemvi", "color"=>"", "bgColor"=>"", "score"=>2}], "isOwner"=>false, "unread"=>true, "unreplied"=>false}, {"tid"=>62760, "uid"=>23791, "cid"=>10, "mainPid"=>307746, "title"=>"<span class=\"answered\"><i class=\"fa fa-question-circle\"></i> Solved</span> Background color of QToolBox pages inside a QTabWidget in Windows 7", "slug"=>"62760/background-color-of-qtoolbox-pages-inside-a-qtabwidget-in-windows-7", "timestamp"=>1452988326340, "lastposttime"=>1454585440025, "postcount"=>14, "viewcount"=>330, "locked"=>false, "deleted"=>false, "pinned"=>false, "isQuestion"=>1, "isSolved"=>1, "teaserPid"=>"311425", "relativeTime"=>"2016-01-16T23:52:06.340Z", "lastposttimeISO"=>"2016-02-04T11:30:40.025Z", "category"=>{"cid"=>10, "name"=>"General and Desktop", "icon"=>"fa-laptop", "bgColor"=>"#80c342", "color"=>"#FFFFFF", "slug"=>"10/general-and-desktop", "disabled"=>false}, "user"=>{"username"=>"kzarog", "userslug"=>"kzarog", "email"=>"sensroed@gmail.com", "picture"=>"https://www.gravatar.com/avatar/43ba37b0a78a988617f0547807296aa7?size=192&d=mm", "fullname"=>"", "signature"=>"", "reputation"=>0, "postcount"=>12, "banned"=>0, "status"=>"online", "uid"=>23791, "icon:text"=>"K", "icon:bgColor"=>"#e65100"}, "teaser"=>{"pid"=>311425, "uid"=>20963, "tid"=>62760, "content"=>"<p>Hi, I want change icon of tab when one page is selected (arrow at right) and for the other arrow at bottom.<br />\nI think it's the same way to do this.</p>\n<p>I tried :</p>\nQToolBox &gt; QAbstractButton{\n    background-image: url(:/icones/deleteRed);\n    image: url(:/icones/deleteRed);\n}\n\n<p>But nothing happend.</p>\n", "timestamp"=>"2016-02-04T11:30:40.025Z", "user"=>{"username"=>"Franckynos", "userslug"=>"franckynos", "email"=>"sensored@gmail.com", "picture"=>"https://www.gravatar.com/avatar/547ae4a492cd16b0db2eb200296ce051?size=192&d=mm", "uid"=>20963, "icon:text"=>"F", "icon:bgColor"=>"#3f51b5"}, "index"=>14}, "tags"=>[{"value"=>"qtabwidget", "color"=>"", "bgColor"=>"", "score"=>16}, {"value"=>"qtoolbox", "color"=>"", "bgColor"=>"", "score"=>1}, {"value"=>"windows 7", "color"=>"", "bgColor"=>"", "score"=>21}, {"value"=>"stylesheet", "color"=>"", "bgColor"=>"", "score"=>61}], "isOwner"=>false, "unread"=>true, "unreplied"=>false}, {"tid"=>65561, "uid"=>28075, "cid"=>10, "mainPid"=>320016, "title"=>"<span class=\"unanswered\"><i class=\"fa fa-question-circle\"></i> Unsolved</span> DragLeaveEvent wont be called", "slug"=>"65561/dragleaveevent-wont-be-called", "timestamp"=>1459293883366, "lastposttime"=>1459336523653, "postcount"=>4, "viewcount"=>111, "locked"=>false, "deleted"=>false, "pinned"=>false, "isQuestion"=>1, "isSolved"=>0, "teaserPid"=>"320086", "relativeTime"=>"2016-03-29T23:24:43.366Z", "lastposttimeISO"=>"2016-03-30T11:15:23.653Z", "category"=>{"cid"=>10, "name"=>"General and Desktop", "icon"=>"fa-laptop", "bgColor"=>"#80c342", "color"=>"#FFFFFF", "slug"=>"10/general-and-desktop", "disabled"=>false}, "user"=>{"username"=>"Marcel Rupp", "userslug"=>"marcel-rupp", "email"=>"sensoreds@live.de", "picture"=>"https://www.gravatar.com/avatar/95fa282313730abf91a724794ebcbdf4?size=192&d=mm", "fullname"=>"Marcel Rupp", "signature"=>"", "reputation"=>0, "postcount"=>2, "banned"=>0, "status"=>"online", "uid"=>28075, "icon:text"=>"M", "icon:bgColor"=>"#e91e63"}, "teaser"=>{"pid"=>320086, "uid"=>18260, "tid"=>65561, "content"=>"<p>HI<br />\nso rootItem is your &quot;drop&quot; widget?<br />\nIs the yellow on picture rootitem or the white one where mouse is? ( A=8 )</p>\n<p>It does look correct so a bit odd.</p>\n<p>and<br />\nvoid dragEnterEvent(QDragEnterEvent* event) Q_DECL_OVERRIDE;</p>\n<p>should be called when u leave this small area.</p>\n<p>I assume you are 100% sure that is not called and its not just<br />\nthe change to while part that is failing.</p>\n<p>I can't guess from this little code what could be wrong.sorry.</p>\n<p>Just for test, could you run my editor and see it does indeed say<br />\n&quot;drag leave&quot; when u drag from the list on the left to center.</p>\n<p><a href=\"https://www.dropbox.com/s/ikra7pm161lzf56/DMDesigner.zip?dl=0\" rel=\"nofollow\">https://www.dropbox.com/s/ikra7pm161lzf56/DMDesigner.zip?dl=0</a></p>\n", "timestamp"=>"2016-03-30T11:15:23.653Z", "user"=>{"username"=>"mrjj", "userslug"=>"mrjj", "email"=>"sensoresh@pedax.com", "picture"=>"https://www.gravatar.com/avatar/bdb648df61ad37e4592e194063f4a784?size=192&d=mm", "uid"=>18260, "icon:text"=>"M", "icon:bgColor"=>"#e91e63"}, "index"=>4}, "tags"=>[{"value"=>"dragleaveevent", "color"=>"", "bgColor"=>"", "score"=>1}, {"value"=>"drag and drop", "color"=>"", "bgColor"=>"", "score"=>32}, {"value"=>"drag problem", "color"=>"", "bgColor"=>"", "score"=>3}, {"value"=>"drag", "color"=>"", "bgColor"=>"", "score"=>7}], "isOwner"=>false, "unread"=>true, "unreplied"=>false}, {"tid"=>65314, "uid"=>12338, "cid"=>10, "mainPid"=>318855, "title"=>"<span class=\"unanswered\"><i class=\"fa fa-question-circle\"></i> Unsolved</span> Find out drop location of a QDrag", "slug"=>"65314/find-out-drop-location-of-a-qdrag", "timestamp"=>1458576354315, "lastposttime"=>1458576354339, "postcount"=>1, "viewcount"=>50, "locked"=>false, "deleted"=>false, "pinned"=>false, "isQuestion"=>1, "isSolved"=>0, "relativeTime"=>"2016-03-21T16:05:54.315Z", "lastposttimeISO"=>"2016-03-21T16:05:54.339Z", "category"=>{"cid"=>10, "name"=>"General and Desktop", "icon"=>"fa-laptop", "bgColor"=>"#80c342", "color"=>"#FFFFFF", "slug"=>"10/general-and-desktop", "disabled"=>false}, "user"=>{"username"=>"EMC3", "userslug"=>"emc3", "email"=>"gilbssrsgdfg@gmail.com", "picture"=>"https://www.gravatar.com/avatar/89196bec050e86e03e0ee57907d66cf8?size=192&d=mm", "fullname"=>"", "signature"=>"", "reputation"=>1, "postcount"=>6, "banned"=>0, "status"=>"offline", "uid"=>12338, "icon:text"=>"E", "icon:bgColor"=>"#795548"}, "tags"=>[{"value"=>"drag and drop", "color"=>"", "bgColor"=>"", "score"=>32}], "isOwner"=>false, "unread"=>true, "unreplied"=>true}], "breadcrumbs"=>[{"text"=>"[[global:home]]", "url"=>"/"}, {"text"=>"Qt Development", "url"=>"/category/4/qt-development"}, {"text"=>"General and Desktop", "url"=>"/category/10/general-and-desktop"}, {"text"=>"Drag tabs between QTabWidgets"}], "privileges"=>{"topics:reply"=>false, "read"=>true, "view_thread_tools"=>false, "editable"=>false, "deletable"=>false, "view_deleted"=>false, "isAdminOrMod"=>false, "disabled"=>false, "tid"=>"67542", "uid"=>0}, "reputation:disabled"=>false, "downvote:disabled"=>false, "feeds:disableRSS"=>false, "rssFeedUrl"=>"/topic/67542.rss", "pagination"=>{"prev"=>{"page"=>1, "active"=>false}, "next"=>{"page"=>1, "active"=>false}, "rel"=>[], "pages"=>[], "currentPage"=>1, "pageCount"=>1}, "loggedIn"=>false, "relative_path"=>"", "template"=>{"name"=>"topic", "topic"=>true}, "bodyClass"=>"page-topic page-topic-67542 page-topic-drag-tabs-between-qtabwidgets"}, {"tid"=>67541, "uid"=>17776, "cid"=>12, "mainPid"=>329851, "title"=>"QML listview delegate item as QQuickItem", "slug"=>"67541/qml-listview-delegate-item-as-qquickitem", "timestamp"=>1464270477302, "lastposttime"=>1464270477316, "postcount"=>1, "viewcount"=>8, "locked"=>false, "deleted"=>false, "pinned"=>false, "isQuestion"=>1, "isSolved"=>0, "relativeTime"=>"2016-05-26T13:47:57.302Z", "lastposttimeISO"=>"2016-05-26T13:47:57.316Z", "posts"=>[{"pid"=>329851, "uid"=>17776, "tid"=>67541, "content"=>"<p>I have list view with delegate items with two component <code>Text</code> and <code>Image</code></p>\n<p>The listview</p>\n<pre><code>ListView {\n    id: table_list_view\n    anchors.fill: parent\n    model: appModel\n    highlight:  Rectangle { color: &quot;#BB333333&quot;; radius: 3 }\n    delegate: appDelegate\n}\n</code></pre>\n<p>And the delegate is like,</p>\n<pre><code> Component {\n        id: appDelegate;\n\n        Item {\n            width:parent.width;\n            height:50;\n           Row{\n               id:table_row\n\n            Rectangle {\n                 id:title_cln\n                 width:200;\n                 height:50;\n                 color: &quot;#88FF3333&quot;\n                 border.width: 1;\n                 border.color: &quot;white&quot;\n\n                 Text{\n                     id: title_txt\n                     anchors.centerIn: parent\n                     text: title;\n                     color: &quot;white&quot;\n                 }\n                 MouseArea{\n                     anchors.fill: parent\n                     onClicked: {\n                         table_list_view.currentIndex=index;\n                     }\n                 }\n               }\n\n\n            Rectangle {\n                 id:img_cln\n                 width:200;\n                 height:50;\n                 color: &quot;#88333333&quot;\n                 border.width: 1;\n                 border.color: &quot;white&quot;\n\n                 Image {\n                     id: myIcon;\n                     width:200;\n                     height:50;\n                     anchors.horizontalCenter: parent.horizontalCenter;\n                     source: icon;\n                     fillMode: Image.PreserveAspectFit\n                     cache : true;\n                     asynchronous: true;\n                 }\n\n                 MouseArea{\n                     anchors.fill: parent\n                     onClicked: {\n                         table_list_view.currentIndex=index;\n                     }\n                 }\n               }\n    }\n    }\n    }\n</code></pre>\n<p>And the list model</p>\n<pre><code>ListModel {\n        id: appModel\n\n    }\n</code></pre>\n<p>I am filling like</p>\n<pre><code> Component.onCompleted: {\n       appModel.append({ title:&quot;Image1&quot;,icon: &quot;http://www.gstatic.com/webp/gallery/4.jpg&quot; })\n       appModel.append({ title:&quot;Image2&quot;,icon: &quot;http://www.gstatic.com/webp/gallery/2.jpg&quot; })\n       appModel.append({ title:&quot;Image3&quot;,icon: &quot;http://www.gstatic.com/webp/gallery/3.jpg&quot; })\n\n  }\n</code></pre>\n<p>Now what I need to implement is get each delegate image item as QQuickItem and then pass to c++ for further processing,</p>\n<p>I can get text from the model like,</p>\n<pre><code>for(var i=0;i&lt;appModel.count;i++)\n           var text =appModel.get(i).title;\n</code></pre>\n<p>Using the same way how can I get <code>Image</code> component with the id <code>myIcon</code></p>\n", "timestamp"=>1464270477316, "reputation"=>0, "votes"=>0, "editor"=>nil, "edited"=>0, "deleted"=>false, "relativeTime"=>"2016-05-26T13:47:57.316Z", "relativeEditTime"=>"", "index"=>0, "user"=>{"username"=>"haris123", "userslug"=>"haris123", "email"=>"sdfsdf@gmail.com", "picture"=>"https://www.gravatar.com/avatar/6eb575d324d4487fd801a16a7f7c8406?size=192&d=mm", "fullname"=>"", "signature"=>"", "reputation"=>9, "postcount"=>46, "banned"=>false, "status"=>"offline", "uid"=>17776, "lastonline"=>1464194998660, "icon:text"=>"H", "icon:bgColor"=>"#607d8b", "groups"=>[], "custom_profile_info"=>[]}, "favourited"=>false, "upvoted"=>false, "downvoted"=>false, "selfPost"=>false, "display_moderator_tools"=>false, "display_move_tools"=>false}], "category"=>{"cid"=>12, "name"=>"Qt Quick", "description"=>"Looking for The Bling Thing(tm)? Post here!", "icon"=>"fa-paper-plane", "bgColor"=>"#80c342", "color"=>"#FFFFFF", "slug"=>"12/qt-quick", "parentCid"=>"4", "topic_count"=>7451, "post_count"=>32440, "disabled"=>false, "order"=>4, "link"=>"", "numRecentReplies"=>1, "class"=>"col-md-4 col-xs-12", "imageClass"=>"auto", "totalPostCount"=>32440, "totalTopicCount"=>7451, "descriptionParsed"=>"Looking for The Bling Thing(tm)? Post here!"}, "thread_tools"=>[{"class"=>"toggleSolved alert-success topic-unsolved", "title"=>"Mark as Solved", "icon"=>"fa-check-circle"}, {"class"=>"toggleQuestionStatus", "title"=>"Make this a normal topic", "icon"=>"fa-comments"}], "tags"=>[], "isFollowing"=>false, "bookmark"=>nil, "unreplied"=>true, "related"=>[], "breadcrumbs"=>[{"text"=>"[[global:home]]", "url"=>"/"}, {"text"=>"Qt Development", "url"=>"/category/4/qt-development"}, {"text"=>"Qt Quick", "url"=>"/category/12/qt-quick"}, {"text"=>"QML listview delegate item as QQuickItem"}], "privileges"=>{"topics:reply"=>false, "read"=>true, "view_thread_tools"=>false, "editable"=>false, "deletable"=>false, "view_deleted"=>false, "isAdminOrMod"=>false, "disabled"=>false, "tid"=>"67541", "uid"=>0}, "reputation:disabled"=>false, "downvote:disabled"=>false, "feeds:disableRSS"=>false, "rssFeedUrl"=>"/topic/67541.rss", "pagination"=>{"prev"=>{"page"=>1, "active"=>false}, "next"=>{"page"=>1, "active"=>false}, "rel"=>[], "pages"=>[], "currentPage"=>1, "pageCount"=>1}, "loggedIn"=>false, "relative_path"=>"", "template"=>{"name"=>"topic", "topic"=>true}, "bodyClass"=>"page-topic page-topic-67541 page-topic-qml-listview-delegate-item-as-qquickitem"}, {"tid"=>67540, "uid"=>91, "cid"=>13, "mainPid"=>329844, "title"=>"Use other variables in Creator Kits Environment", "slug"=>"67540/use-other-variables-in-creator-kits-environment", "timestamp"=>1464267685048, "lastposttime"=>1464267685063, "postcount"=>1, "viewcount"=>9, "locked"=>false, "deleted"=>false, "pinned"=>false, "isQuestion"=>1, "isSolved"=>0, "relativeTime"=>"2016-05-26T13:01:25.048Z", "lastposttimeISO"=>"2016-05-26T13:01:25.063Z", "posts"=>[{"pid"=>329844, "uid"=>91, "tid"=>67540, "content"=>"<p>Is there a way to use other environment variables or define and use a new one when setting the environment of a kit as described here? <a href=\"http://doc.qt.io/qtcreator/creator-targets.html\" rel=\"nofollow\">http://doc.qt.io/qtcreator/creator-targets.html</a></p>\n<p>I am trying to prepend PATH and LIB on Windows with relative paths from QTDIR. But QTDIR doesn't seem to be available here. I tried defining and using my own variable but it doesn't resolve for my PATH and LIB command there.</p>\n<p>Also. The UI sorts my lines of environment commands alphabetically no matter how I arrange them. That renders this information useless: <a href=\"http://doc.qt.io/qtcreator/creator-build-settings.html#batch-editing\" rel=\"nofollow\">http://doc.qt.io/qtcreator/creator-build-settings.html#batch-editing</a></p>\n", "timestamp"=>1464267685063, "reputation"=>0, "votes"=>0, "editor"=>nil, "edited"=>0, "deleted"=>false, "relativeTime"=>"2016-05-26T13:01:25.063Z", "relativeEditTime"=>"", "index"=>0, "user"=>{"username"=>"stephenju", "userslug"=>"stephenju", "email"=>"dsdf@ju-ju.com", "picture"=>"https://www.gravatar.com/avatar/586da7581612180169fd9ab96ac11819?size=192&d=mm", "fullname"=>"", "signature"=>"", "reputation"=>8, "postcount"=>85, "banned"=>false, "status"=>"offline", "uid"=>91, "lastonline"=>1464185582622, "icon:text"=>"S", "icon:bgColor"=>"#9c27b0", "groups"=>[], "custom_profile_info"=>[]}, "favourited"=>false, "upvoted"=>false, "downvoted"=>false, "selfPost"=>false, "display_moderator_tools"=>false, "display_move_tools"=>false}], "category"=>{"cid"=>13, "name"=>"Tools", "description"=>"Have a question about Qt Creator, our cross-platform IDE, or any of the other tools? Ask here!", "icon"=>"fa-hdd-o", "bgColor"=>"#80c342", "color"=>"#FFFFFF", "slug"=>"13/tools", "parentCid"=>"4", "topic_count"=>3227, "post_count"=>15577, "disabled"=>false, "order"=>5, "link"=>"", "numRecentReplies"=>1, "class"=>"col-md-4 col-xs-12", "imageClass"=>"auto", "totalPostCount"=>15577, "totalTopicCount"=>3227, "descriptionParsed"=>"Have a question about Qt Creator, our cross-platform IDE, or any of the other tools? Ask here!"}, "thread_tools"=>[{"class"=>"toggleSolved alert-success topic-unsolved", "title"=>"Mark as Solved", "icon"=>"fa-check-circle"}, {"class"=>"toggleQuestionStatus", "title"=>"Make this a normal topic", "icon"=>"fa-comments"}], "tags"=>[], "isFollowing"=>false, "bookmark"=>nil, "unreplied"=>true, "related"=>[], "breadcrumbs"=>[{"text"=>"[[global:home]]", "url"=>"/"}, {"text"=>"Qt Development", "url"=>"/category/4/qt-development"}, {"text"=>"Tools", "url"=>"/category/13/tools"}, {"text"=>"Use other variables in Creator Kits Environment"}], "privileges"=>{"topics:reply"=>false, "read"=>true, "view_thread_tools"=>false, "editable"=>false, "deletable"=>false, "view_deleted"=>false, "isAdminOrMod"=>false, "disabled"=>false, "tid"=>"67540", "uid"=>0}, "reputation:disabled"=>false, "downvote:disabled"=>false, "feeds:disableRSS"=>false, "rssFeedUrl"=>"/topic/67540.rss", "pagination"=>{"prev"=>{"page"=>1, "active"=>false}, "next"=>{"page"=>1, "active"=>false}, "rel"=>[], "pages"=>[], "currentPage"=>1, "pageCount"=>1}, "loggedIn"=>false, "relative_path"=>"", "template"=>{"name"=>"topic", "topic"=>true}, "bodyClass"=>"page-topic page-topic-67540 page-topic-use-other-variables-in-creator-kits-environment"}, {"tid"=>67539, "uid"=>9367, "cid"=>13, "mainPid"=>329832, "title"=>"Qt Creator 4: is it possible to switch back to the old code model?", "slug"=>"67539/qt-creator-4-is-it-possible-to-switch-back-to-the-old-code-model", "timestamp"=>1464265873903, "lastposttime"=>1464267330291, "postcount"=>4, "viewcount"=>20, "locked"=>false, "deleted"=>false, "pinned"=>false, "isQuestion"=>1, "isSolved"=>1, "teaserPid"=>"329843", "relativeTime"=>"2016-05-26T12:31:13.903Z", "lastposttimeISO"=>"2016-05-26T12:55:30.291Z", "posts"=>[{"pid"=>329832, "uid"=>9367, "tid"=>67539, "content"=>"<p>The new-default clang code model is too buggy. Qt Creator is now barely better than a text editor. The old model, on the other hand, worked very good, even though it couldn't handle templates. But I don't see the old model anywhere to switch to. My productivity when writing new code plummeted with the new Creator release :/</p>\n", "timestamp"=>1464265873940, "reputation"=>0, "votes"=>0, "editor"=>nil, "edited"=>0, "deleted"=>false, "relativeTime"=>"2016-05-26T12:31:13.940Z", "relativeEditTime"=>"", "index"=>0, "user"=>{"username"=>"Violet Giraffe", "userslug"=>"violet-giraffe", "email"=>"sdfsdf@ya.ru", "picture"=>"https://www.gravatar.com/avatar/467b06faee47b9c69f210952f217f63d?size=192&d=mm", "fullname"=>"", "signature"=>"", "reputation"=>65, "postcount"=>380, "banned"=>false, "status"=>"offline", "uid"=>9367, "lastonline"=>1464268772971, "icon:text"=>"V", "icon:bgColor"=>"#1b5e20", "groups"=>[], "custom_profile_info"=>[]}, "favourited"=>false, "upvoted"=>false, "downvoted"=>false, "selfPost"=>false, "display_moderator_tools"=>false, "display_move_tools"=>false}, {"pid"=>329835, "uid"=>747, "tid"=>67539, "content"=>"<p>Clang code model is now a plugin. Disable it (Help -&gt; About Plugins -&gt; C++ -&gt; ClangCodeModel) and restart Qt Creator.</p>\n", "timestamp"=>1464266352811, "reputation"=>0, "votes"=>2, "editor"=>nil, "edited"=>0, "deleted"=>false, "relativeTime"=>"2016-05-26T12:39:12.811Z", "relativeEditTime"=>"", "index"=>1, "user"=>{"username"=>"Chris Kawa", "userslug"=>"chris-kawa", "email"=>"ksdfsdfs@gmail.com", "picture"=>"https://www.gravatar.com/avatar/45bb97cd3a32d6468c962c9cd09ae59e?size=192&d=mm", "fullname"=>"Chris Kawa", "signature"=>"", "reputation"=>1003, "postcount"=>2771, "banned"=>false, "status"=>"online", "uid"=>747, "lastonline"=>1464273550204, "icon:text"=>"C", "icon:bgColor"=>"#e91e63", "groups"=>[{"name"=>"Moderators", "slug"=>"moderators", "labelColor"=>"#408500", "icon"=>"fa-check-square-o", "userTitle"=>"Moderators"}], "selectedGroup"=>{"name"=>"Moderators", "slug"=>"moderators", "labelColor"=>"#408500", "icon"=>"fa-check-square-o", "userTitle"=>"Moderators"}, "custom_profile_info"=>[]}, "favourited"=>false, "upvoted"=>false, "downvoted"=>false, "selfPost"=>false, "display_moderator_tools"=>false, "display_move_tools"=>false}, {"pid"=>329839, "uid"=>9367, "tid"=>67539, "content"=>"<p><a class=\"plugin-mentions-a\" href=\"https://forum.qt.io/user/chris-kawa\">@Chris-Kawa</a>, aha, thanks!<br />\nIs there a simple way to see only the code model-related bug reports in the Qt Jira tracker?</p>\n", "timestamp"=>1464266855383, "reputation"=>0, "votes"=>0, "editor"=>nil, "edited"=>0, "deleted"=>false, "toPid"=>"329835", "relativeTime"=>"2016-05-26T12:47:35.383Z", "relativeEditTime"=>"", "index"=>2, "parent"=>{"username"=>"Chris Kawa"}, "user"=>{"username"=>"Violet Giraffe", "userslug"=>"violet-giraffe", "email"=>"sdcsdv@ya.ru", "picture"=>"https://www.gravatar.com/avatar/467b06faee47b9c69f210952f217f63d?size=192&d=mm", "fullname"=>"", "signature"=>"", "reputation"=>65, "postcount"=>380, "banned"=>false, "status"=>"offline", "uid"=>9367, "lastonline"=>1464268772971, "icon:text"=>"V", "icon:bgColor"=>"#1b5e20", "groups"=>[], "custom_profile_info"=>[]}, "favourited"=>false, "upvoted"=>false, "downvoted"=>false, "selfPost"=>false, "display_moderator_tools"=>false, "display_move_tools"=>false}, {"pid"=>329843, "uid"=>747, "tid"=>67539, "content"=>"<p>Hm, I  don't think so. There's a component &quot;Clang Static Analyser&quot; but I don't see anything for the code model. The closest would be the <a href=\"https://bugreports.qt.io/browse/QTCREATORBUG-14997?jql=project%20%3D%20QTCREATORBUG%20AND%20resolution%20%3D%20Unresolved%20AND%20component%20%3D%20%22C%2FC%2B%2B%2FObj-C%2B%2B%20Support%22%20ORDER%20BY%20priority%20DESC\" rel=\"nofollow\">C/C++/Obj-C++ Support</a> I guess.</p>\n", "timestamp"=>1464267330291, "reputation"=>0, "votes"=>1, "editor"=>nil, "edited"=>0, "deleted"=>false, "relativeTime"=>"2016-05-26T12:55:30.291Z", "relativeEditTime"=>"", "index"=>3, "user"=>{"username"=>"Chris Kawa", "userslug"=>"chris-kawa", "email"=>"krzsdcsdcsdc@gmail.com", "picture"=>"https://www.gravatar.com/avatar/45bb97cd3a32d6468c962c9cd09ae59e?size=192&d=mm", "fullname"=>"Chris Kawa", "signature"=>"", "reputation"=>1003, "postcount"=>2771, "banned"=>false, "status"=>"online", "uid"=>747, "lastonline"=>1464273550204, "icon:text"=>"C", "icon:bgColor"=>"#e91e63", "groups"=>[{"name"=>"Moderators", "slug"=>"moderators", "labelColor"=>"#408500", "icon"=>"fa-check-square-o", "userTitle"=>"Moderators"}], "selectedGroup"=>{"name"=>"Moderators", "slug"=>"moderators", "labelColor"=>"#408500", "icon"=>"fa-check-square-o", "userTitle"=>"Moderators"}, "custom_profile_info"=>[]}, "favourited"=>false, "upvoted"=>false, "downvoted"=>false, "selfPost"=>false, "display_moderator_tools"=>false, "display_move_tools"=>false}], "category"=>{"cid"=>13, "name"=>"Tools", "description"=>"Have a question about Qt Creator, our cross-platform IDE, or any of the other tools? Ask here!", "icon"=>"fa-hdd-o", "bgColor"=>"#80c342", "color"=>"#FFFFFF", "slug"=>"13/tools", "parentCid"=>"4", "topic_count"=>3227, "post_count"=>15577, "disabled"=>false, "order"=>5, "link"=>"", "numRecentReplies"=>1, "class"=>"col-md-4 col-xs-12", "imageClass"=>"auto", "totalPostCount"=>15577, "totalTopicCount"=>3227, "descriptionParsed"=>"Have a question about Qt Creator, our cross-platform IDE, or any of the other tools? Ask here!"}, "thread_tools"=>[{"class"=>"toggleSolved alert-warning topic-solved", "title"=>"Mark as Unsolved", "icon"=>"fa-question-circle"}, {"class"=>"toggleQuestionStatus", "title"=>"Make this a normal topic", "icon"=>"fa-comments"}], "tags"=>[], "isFollowing"=>false, "bookmark"=>nil, "unreplied"=>false, "related"=>[], "breadcrumbs"=>[{"text"=>"[[global:home]]", "url"=>"/"}, {"text"=>"Qt Development", "url"=>"/category/4/qt-development"}, {"text"=>"Tools", "url"=>"/category/13/tools"}, {"text"=>"Qt Creator 4: is it possible to switch back to the old code model?"}], "privileges"=>{"topics:reply"=>false, "read"=>true, "view_thread_tools"=>false, "editable"=>false, "deletable"=>false, "view_deleted"=>false, "isAdminOrMod"=>false, "disabled"=>false, "tid"=>"67539", "uid"=>0}, "reputation:disabled"=>false, "downvote:disabled"=>false, "feeds:disableRSS"=>false, "rssFeedUrl"=>"/topic/67539.rss", "pagination"=>{"prev"=>{"page"=>1, "active"=>false}, "next"=>{"page"=>1, "active"=>false}, "rel"=>[], "pages"=>[], "currentPage"=>1, "pageCount"=>1}, "loggedIn"=>false, "relative_path"=>"", "template"=>{"name"=>"topic", "topic"=>true}, "bodyClass"=>"page-topic page-topic-67539 page-topic-qt-creator-4-is-it-possible-to-switch-back-to-the-old-code-model"}]

  describe "add_newest_topics" do

    it "saves topics" do
      ParseTopics.add_newest_topics(topic_array)
      expect(Topic.all.count).to equal(5)
    end
  end

  describe "add_posts_and_users" do

    it "saves users" do
      ParseTopics.add_newest_topics(topic_array)
      expect(User.all.count).to equal(6)
    end
  end

  describe "fetch_recent_topics" do

    recent = IO.read("spec/fixtures/recent.json")

    it "downloads a json containing recent topics" do
      stub_request(:get, /.*/).to_return(body: recent, headers: {"Content-Type"=> "application/json"})

      recent_response = ParseTopics.fetch_recent_topics
      expect(recent_response[0]["tid"]).to eq(67699)
      expect(recent_response[59]["tid"]).to eq(67666)
    end
  end

  describe "newest topic" do

    recent = IO.read("spec/fixtures/recent.json")

    it "returns newest topic" do
      stub_request(:get, /.*/).to_return(body: recent, headers: {"Content-Type"=> "application/json"})
      newest_topic_response = ParseTopics.newest_topic
      expect(newest_topic_response).to eq(67699)
    end
  end

  describe "fetch_newest_topics" do

    before (:each) do

      topic = IO.read("spec/fixtures/topic.json")
      recent = IO.read("spec/fixtures/recent.json")
      topic_slug = IO.read("spec/fixtures/topic_slug")

      stub_request(:get, "http://forum.qt.io/api/topic/67699").
         with(:headers => {'Accept'=>'*/*', 'Accept-Encoding'=>'gzip;q=1.0,deflate;q=0.6,identity;q=0.3', 'User-Agent'=>'Ruby'}).
         to_return(:status => 200, :body => topic_slug, :headers => {})
      stub_request(:get, /.*recent/).to_return(body: recent, headers: {"Content-Type"=> "application/json"})
      stub_request(:get, "http://forum.qt.io/api/topic/67699/qt-forum-mail-subscribtion").to_return(body: topic, headers: {"Content-Type"=> "application/json"})

      stub_request(:get, "http://forum.qt.io/api/topic/0").
         with(:headers => {'Accept'=>'*/*', 'Accept-Encoding'=>'gzip;q=1.0,deflate;q=0.6,identity;q=0.3', 'User-Agent'=>'Ruby'}).
         to_return(:status => 200, :body => "/topic/0/slug", :headers => {})

      stub_request(:get, "http://forum.qt.io/api/topic/0/slug").to_return(body: topic, headers: {"Content-Type"=> "application/json"})

      stub_request(:get, "http://forum.qt.io/api/topic/1").
         with(:headers => {'Accept'=>'*/*', 'Accept-Encoding'=>'gzip;q=1.0,deflate;q=0.6,identity;q=0.3', 'User-Agent'=>'Ruby'}).
         to_return(:status => 200, :body => "not-authorized", :headers => {})

      stub_request(:get, "http://forum.qt.io/api/topic/2").
         with(:headers => {'Accept'=>'*/*', 'Accept-Encoding'=>'gzip;q=1.0,deflate;q=0.6,identity;q=0.3', 'User-Agent'=>'Ruby'}).
         to_return(:status => 200, :body => "<html>", :headers => {})

    end


    it "returns an array" do
        fetch_newest_topics_response = ParseTopics.fetch_newest_topics(1)
        expect(fetch_newest_topics_response).to be_instance_of(Array)
    end

    it "returns an array containing hash instances" do
        fetch_newest_topics_response = ParseTopics.fetch_newest_topics(1)
        expect(fetch_newest_topics_response[0]).to be_instance_of(Hash)
    end

    it "returns a correct topic when called with '1'" do
        fetch_newest_topics_response = ParseTopics.fetch_newest_topics(1)
        expect(fetch_newest_topics_response[0]["tid"]).to eq(67699)
    end

    it "breaks the loop if trying to fetch more than the total amount of topics" do
        ParseTopics.stubs(:newest_topic).returns(0)
        topics = ParseTopics.fetch_newest_topics(2)
        expect(topics.length).to be(1)
    end

    it "skips topics where slug is 'not-authorized'" do
        ParseTopics.stubs(:newest_topic).returns(1)
        topics = ParseTopics.fetch_newest_topics(2)
        expect(topics.length).to be(1)
    end

    it "skips topics where slug is '<html>'" do
        ParseTopics.stubs(:newest_topic).returns(2)
        topics = ParseTopics.fetch_newest_topics(3)
        expect(topics.length).to be(1)
    end

    it "skips topic where fetched slug is not a string" do
        ParseTopics.stubs(:newest_topic).returns(1)
        HTTParty.stubs(:parsed_response).returns({})

        topics = ParseTopics.fetch_newest_topics(2)
        expect(topics.length).to be(1)
    end

  end

end
